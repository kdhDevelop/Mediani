<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kdedevelop.mediani.media.adapter.out.mybatis.relationship.MediaCharacterMyBatisRelationshipRepository">
    <!-- CREATE -->
    <insert id="create">
        INSERT INTO `media_character` (type_id, media_id, character_id)
        VALUES (#{item.typeId}, #{item.mediaId}, #{item.characterId})
    </insert>

    <!-- CREATE ALL -->
    <insert id="createAll">
        INSERT INTO `media_character` (type_id, media_id, character_id)
        VALUES
        <foreach collection="key" item="item" separator=",">
            (#{item.typeId}, #{item.mediaId}, #{item.characterId})
        </foreach>
    </insert>

    <!-- DELETE -->
    <delete id="delete">
        DELETE FROM `media_character`
        WHERE type_id = #{key.typeId} AND media_id = #{key.mediaId} AND character_id = #{key.characterId}
    </delete>
</mapper>