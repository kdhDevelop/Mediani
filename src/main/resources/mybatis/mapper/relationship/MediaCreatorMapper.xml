<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kdedevelop.mediani.adapter.out.media.mybatis.relationship.MediaCreatorMyBatisRelationshipRepository">
    <!-- CREATE -->
    <insert id="create">
        INSERT INTO `media_creator` (type_id, media_id, creator_id)
        VALUES (#{item.typeId}, #{item.mediaId}, #{item.creatorId})
    </insert>

    <!-- CREATE ALL -->
    <insert id="createAll">
        INSERT INTO `media_creator` (type_id, media_id, creator_id)
        VALUES
        <foreach collection="key" item="item" separator=",">
            (#{item.typeId}, #{item.mediaId}, #{item.creatorId})
        </foreach>
    </insert>

    <!-- DELETE -->
    <delete id="delete">
        DELETE FROM `media_creator`
        WHERE type_id = #{key.typeId} AND media_id = #{key.mediaId} AND creator_id = #{key.creatorId}
    </delete>
</mapper>